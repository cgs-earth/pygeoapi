<script id="resource-block" type="text/x-template">
  <div class="resource-block">
    <v-card>
      <v-slide-group
        v-model="window"
        show-arrows
        center-active
        mandatory
      >

        <v-slide-item
          v-for="(v, k) in vals"
          :key="k"
          v-slot="{ active, toggle }"
        >
          <v-btn
            class="mx-2"
            :input-value="active"
            depressed
            rounded
            @click="toggle"
          >
            <strong class="text-h4" v-html="$root.capitalize(k,1)"></strong>
          </v-btn>
        </v-slide-item>

        <v-spacer />

        <add-block
          :vals="templates"
          :label="label"
          :config="vals"
          :key="id"
        />


      </v-slide-group>

      <v-card-text>
        <v-window v-model="window">
          <v-window-item v-for="(v, k) in vals" :key="k">
            <gui-block
              :key="`${id}.${k}`"
              :label="k"
              :vals="v"
              depth="-1"
            />
          </v-window-item>
        </v-window>
      </v-card-text>
    </v-card>
  </div>
</script>

<script>
  Vue.component('ResourceBlock', {
    props: ['vals', 'label'],
    name: 'ResourceBlock',
    template: '#resource-block',
    data: function () {
      return {
        id: this.$vnode.key,
        dialog: false,
        window: 0,
      }
    },
    computed: {
      templates: function () {
        return this.$root.copy(this.$root.template.resources)
      },
    },
    methods: {
      closed: function () {
        this.dialog = false
      },
    },
  })
</script>